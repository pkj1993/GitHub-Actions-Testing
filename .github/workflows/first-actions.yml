name: My First GitHub Actions Testing:3

on:
  workflow_dispatch:
jobs:
  Projrct-tag:
    name: Projrct-tag1
    runs-on: ubuntu-latest
    env:  # Define environment variables
      GITHUB_TOKEN: ${{ secrets.PAT }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
        
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.x'  # Specify the Python version you want to use

      - name: Install 'hub' command
        run: |
          # Install 'hub' to interact with GitHub via CLI
          # Replace 'YOUR_GITHUB_USERNAME' with your actual GitHub username
          # GitHub Actions provides GITHUB_ACTOR environment variable with the username
          # to get the user who triggered the workflow.
          wget https://github.com/github/hub/releases/download/v2.14.2/hub-linux-amd64-2.14.2.tgz
          tar xvf hub-linux-amd64-2.14.2.tgz
          sudo ./hub-linux-amd64-2.14.2/install

      - name: Set up Git
        run: |
            git config --global user.name "pkj1993"
            git config --global user.email "pkj161293@gmail.com"
            git config --global hub.protocol https  



      - name: Fetch GitHub tags using Personal Access Token (PAT)
        run: |
          echo -n "${GITHUB_TOKEN}" > ~/.ghtoken
          tags=$(hub api repos/pkj161293/pythonscripttest/tags | jq -r '.[].name')
          echo "$tags" > tags.txt
          cat tags.txt            
            
      - name: Execute Python script for Semantic Versioning
        run: python ./.github/workflows/semantic_versioning.py
        env:
          GITHUB_TOKEN: ${{ secrets.secrets.PAT }}        
          
        
        
